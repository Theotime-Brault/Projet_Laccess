{% extends '@Lacces/Administration/administration.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/css_for_views/addExercice.css') }}">
{% endblock %}

{% block title %}Ajouter un exercice{% endblock %}

{% block body %}
    <div class="container-body">
        <main>
            <div class="container">
                <div class="container-main-flex">
                    <div class="row center">
                        <a class="btn background-color-orange-lacces white-text btn-hover" href="{{ path('lacces_ex__fr_add') }}">Passer en français</a>
                        <p class="flow-text">Ajout d'un exercice pour un mot anglais</p>
                    </div>
                    <div class="row">
                        <div class="col s12 m6">
                            <label>Mots</label>
                            <select id="words" required="required">
                                <option value="0" selected="selected">Selectionner un mot</option>
                                {% for w in words %}
                                    <option value="{{ w.id }}">{{ w.word }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col s12 m6">
                            <label for="typeEx">Type d'éxercice</label>
                            <select name="typeEx" id="typeEx" required="required">
                                <option value="0" selected="selected">Selectionner le type d'exercice</option>
                                <option value="1">Signification video</option>
                                <option value="2">QCM</option>
                                <option value="3">QCM video</option>
                                <option value="4">Reformulation</option>
                            </select>
                        </div>
                        <div class="col s12">
                            <div id="ex">
                            </div>
                        </div>
                    </div>
                    <div class="row center">
                        <button id="valid" type="button" class="btn btn-hover background-color-orange-lacces" onclick="submit()">Ajouter</button>
                    </div>
                </div>
            </div>
        </main>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/js_for_views/addExercice.js') }}"></script>
    <script>
        function submit(){
            var ex = $('#typeEx').val();
            var solution = $('#solution').val();;
            var wordId = $('#words').val();

            if(ex != "" && solution != "" && wordId != ""){
                switch (ex) {
                    case '1':
                        var videoLink = $('#videoLink').val();
                        if(videoLink != ""){
                            $.ajax({
                                cache:false,
                                type: 'POST',
                                dataType: 'json',
                                url: "{{ path('validAddExercice') }}",
                                data:{'word':wordId, 'ex': ex, 'langue':"en", 'solution':solution, 'videoLink':videoLink},
                                success:function () {
                                    succes();
                                },
                                error:function () {
                                    alert("erreur");
                                }
                            })
                        }
                        break;
                    case '2':
                        var enonce = $('#enonce').val();
                        var otherRep = OtherRepString();
                        if(enonce != "" && otherRep != ""){
                            $.ajax({
                                cache:false,
                                type: 'POST',
                                dataType: 'json',
                                url: "{{ path('validAddExercice') }}",
                                data:{'word':wordId, 'ex': ex, 'langue':"en", 'enonce':enonce, 'solution':solution, 'otherRep':otherRep},
                                success:function () {
                                    succes();
                                },
                                error:function () {
                                    alert("erreur");
                                }
                            })
                        }
                        break;
                    case '3':
                        var videoLink = $('#videoLink').val();
                        var otherRep = OtherRepString();
                        if(videoLink != "" && otherRep != ""){
                            $.ajax({
                                cache:false,
                                type: 'POST',
                                dataType: 'json',
                                url: "{{ path('validAddExercice') }}",
                                data:{'word':wordId, 'ex': ex, 'langue':"en", 'solution':solution, 'videoLink':videoLink, 'otherRep':otherRep},
                                success:function () {
                                    succes();
                                },
                                error:function () {
                                    alert("erreur");
                                }
                            })
                        }
                        break;
                    case '4':
                        var enonce = $('#enonce').val();
                        if(enonce != ""){
                            $.ajax({
                                cache:false,
                                type: 'POST',
                                dataType: 'json',
                                url: "{{ path('validAddExercice') }}",
                                data:{'word':wordId, 'ex': ex, 'langue':"en", 'enonce':enonce, 'solution':solution},
                                success:function () {
                                    succes();
                                },
                                error:function () {
                                    alert("erreur");
                                }
                            })
                        }
                        break;
                    default:
                        return;
                        break;
                }
            }
        }
    </script>
{% endblock %}

