{% extends '@Lacces/Administration/administration.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/css_for_views/addExercice.css') }}">
{% endblock %}

{% block title %}Ajouter un exercice{% endblock %}

{% block body %}
    <div class="container">
        <h5>Ajout d'un exercice pour un mot anglais</h5>
        <form>
            <label>Mots</label>
            <select id="words" required="required">
                <option value="" selected="selected">Selectionner un mot</option>
                {% for w in words %}
                    <option value="{{ w.id }}">{{ w.word }}</option>
                {% endfor %}
            </select>
            <label for="typeEx">Type d'éxercice</label>
            <select name="typeEx" id="typeEx" required="required">
                <option value="0" selected="selected">Selectionner le type d'exercice</option>
                <option value="1">Signification video</option>
                <option value="2">QCM</option>
                <option value="3">QCM video</option>
                <option value="4">Reformulation</option>
            </select>
            <div id="ex">
            </div>
        </form>
        <div class="row center">
            <button id="valid" type="button" class="btn btn-hover background-color-orange-lacces" onclick="submit()">Ajouter</button>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/js_for_views/addExercice.js') }}"></script>
    <script>
        function succes() {
            alert("Exercice ajouté!");
            $('#typeEx').val(0);
            $('#words').val(0);
        }
        
        function submit(){
            var ex = $('#typeEx').val();
            var solution = $('#solution').val();;
            var wordId = $('#words').val();

            switch (ex) {
                case '1':
                    var videoLink = $('#videoLink').val();

                    $.ajax({
                        cache:false,
                        type: 'POST',
                        dataType: 'json',
                        url: "{{ path('validAddExercice') }}",
                        data:{'word':wordId, 'ex': ex, 'langue':"en", 'solution':solution, 'videoLink':videoLink},
                        success:function () {
                            succes();
                        },
                        error:function () {
                        }
                    })
                    break;
                case '2':
                    var enonce = $('#enonce').val();
                    var otherRep = OtherRepString();

                    $.ajax({
                        cache:false,
                        type: 'POST',
                        dataType: 'json',
                        url: "{{ path('validAddExercice') }}",
                        data:{'word':wordId, 'ex': ex, 'langue':"en", 'enonce':enonce, 'solution':solution, 'otherRep':otherRep},
                        success:function () {
                            succes();
                        },
                        error:function () {
                        }
                    })
                    break;
                case '3':
                    var videoLink = $('#videoLink').val();
                    var otherRep = OtherRepString();

                    $.ajax({
                        cache:false,
                        type: 'POST',
                        dataType: 'json',
                        url: "{{ path('validAddExercice') }}",
                        data:{'word':wordId, 'ex': ex, 'langue':"en", 'solution':solution, 'videoLink':videoLink, 'otherRep':otherRep},
                        success:function () {
                            succes();
                        },
                        error:function () {
                        }
                    })
                    break;
                case '4':
                    var enonce = $('#enonce').val();
                    $.ajax({
                        cache:false,
                        type: 'POST',
                        dataType: 'json',
                        url: "{{ path('validAddExercice') }}",
                        data:{'word':wordId, 'ex': ex, 'langue':"en", 'enonce':enonce, 'solution':solution},
                        success:function () {
                            succes();
                        },
                        error:function () {
                        }
                    })
                    break;
                default:
                    return;
                break;
            }
        }
    </script>
{% endblock %}

